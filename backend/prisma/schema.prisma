generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            String         @id @default(uuid())
  /// Full name of a user
  name          String         @db.VarChar(200)
  sex           Sex?
  phone         String?        @db.VarChar(20)
  email         String         @unique @db.VarChar(80)
  location      String?
  photo_url     String         @db.VarChar(300)
  role          Role           @default(user)
  User_Security User_Security?
}

model User_Security {
  id                     String  @id @default(uuid())
  user                   User    @relation(fields: [user_id], references: [id])
  user_id                String  @unique @db.VarChar(300)
  password               String  @db.VarChar(300)
  password_change_token  String? @db.VarChar(300)
  email_activation_token String? @db.VarChar(300)
  email_change_token     String? @db.VarChar(300)
  email_provisional      String? @db.VarChar(300)
  refresh_token          String? @db.VarChar(300)
  google_acc_id          String? @db.VarChar(300)
  facebook_acc_id        String? @db.VarChar(300)
}

model Body_Type {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
  models       Model[]
}

model Manufacturer_Country {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
  models       Model[]
}

model Brand {
  id           String @id @default(uuid())
  name         String @db.VarChar(70)
  logo_url     String @db.VarChar(250)
  autoria_code Int
  models       Model[]
}

model Model {
  id                     String               @id @default(uuid())
  manufacturer_id        String
  manufacture_country    Manufacturer_Country @relation(fields: [manufacturer_id], references: [id])
  body_type_id           String
  body_type              Body_Type            @relation(fields: [body_type_id], references: [id])
  manufacture_country_id String
  brand                  Brand                @relation(fields: [manufacture_country_id], references: [id])
  name                   String               @db.VarChar(70)
  code_name              String               @db.VarChar(70)
  year_start             Int
  year_end               Int
  photo_urls             Json
  autoria_code           Int
}

model Drivetrain {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
}

model Fuel_Type {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
}

model Color {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
}

model Transmission_Type {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
}

model Option {
  id           String @id @default(uuid())
  name         String @db.VarChar(300)
  autoria_code Int
  type         Type
}

enum Role {
  user
  admin
}

enum Sex {
  male
  female
  not_known
  not_appliable
}

enum Type {
  security
  optics
  multimedia
  upholstery
  sound
  design
  comfort
  auxiliary
}
